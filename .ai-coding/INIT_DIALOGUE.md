# 初始化问答脚本（通用）

用途：通过对话收集信息，用于生成项目的 AI 协作资产与架构基线。

## 开场

"我将为这个项目初始化 AI Coding 脚手架，生成 `AGENTS.md`、架构文档与 SOP 模板。先确认偏好，然后我会扫描项目自动填充信息。"

## 执行规则

- **扫描优先**：先读取 `package.json`、锁文件、`src/`、`.github/` 等，能确定的内容直接填入
- **展示结果**：每步展示扫描汇总表，只问「是否有补充」
- **快速推进**：用户答 `1` 即跳过该步继续
- **回答格式**：用编号作答（如 `1` 或 `1,3`）

---

## 第 1 步：偏好设置

1. 你使用的工具是哪些？（可多选）
   - 1) Codex
   - 2) Claude Code
   - 3) Cursor
   - 4) Copilot
2. 语言与时间偏好？
   - 1) 中文 / Asia/Shanghai / YYYY-MM-DD / 24h
   - 2) 英文 / UTC
   - 3) 其他（请写明）

---

## 第 2 步：项目信息与技术栈

Agent 扫描 `package.json`、锁文件、框架配置后展示：

| 项 | 值 |
|---|---|
| 项目名称 | {扫描结果} |
| 项目描述 | {扫描结果} |
| 包管理器 | {扫描结果：bun/pnpm/yarn/npm} |
| 框架 | {扫描结果} |
| 路由 | {扫描结果} |
| 样式 | {扫描结果} |
| 状态管理 | {扫描结果} |
| 数据请求 | {扫描结果} |
| 运行时版本 | {扫描结果} |

是否有补充？
- 1) 无，继续
- 2) 有（请写明）

---

## 第 3 步：项目结构与工程化

Agent 扫描目录结构、lint 配置、CI 配置后展示：

**目录结构**
```
{扫描结果：tree 输出}
```

**工程化配置**
| 项 | 值 |
|---|---|
| Lint/Format | {扫描结果：biome/eslint/prettier} |
| 测试框架 | {扫描结果：vitest/jest/无} |
| CI/CD | {扫描结果：GitHub Actions/GitLab CI/无} |
| 类型检查 | {扫描结果：TypeScript/无} |

是否有补充？
- 1) 无，继续
- 2) 有（请写明）

---

## 第 4 步：其他约束

有需要 Agent 特别注意的约束或踩坑点吗？

例如：
- 特殊的代码风格要求
- 禁止使用的库或模式
- 已知的坑或注意事项
- 私有依赖或特殊配置

- 1) 没有
- 2) 有（请写明）

---

## 第 5 步：输出确认

"我将基于以上信息生成：
- `AGENTS.md`（参考 `.ai-coding/example/AGENTS_WEB_EXAMPLE.md`）
- `CLAUDE.md`（若使用 Claude Code，与 `AGENTS.md` 内容一致）
- 工作流模板与评审清单

生成的 AGENTS.md 将包含「对话模式」，Agent 会根据用户输入自动识别 Mode：
- **workflow**：开发任务，启动工作流（强制状态管理，每轮必须声明 `[STATE]`，即使状态未变）
- **continue**：恢复未完成任务
- **general**：一般问答，不启动工作流（涉及文件/命令/todo 时会提示切换到 workflow）

确认生成？"
- 1) 确认
- 2) 返回修改

完成后进入 `INIT_WORKFLOW.md` 继续。
